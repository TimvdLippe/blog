<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!doctype html>
<html lang="en">
<head>
  <base href="blog/" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">

  <title>My App</title>

  <link rel="shortcut icon" sizes="32x32" href="/images/app-icon-32.png">

  <meta name="theme-color" content="#fff">
  <link rel="manifest" href="/manifest.json">

  <script>
    (function(window, document, navigator) {
      // Functionality copied from
      // https://github.com/PolymerElements/platinum-https-redirect/blob/6ad1a02af72f93de7b2d647dab96f5f2f64ed7d6/platinum-https-redirect.html#L46-L59
      function _isLocalhost(hostname) {
        // !! coerces the logical expression to evaluate to the values true or false.
        return !!(hostname === 'localhost' ||
                  // [::1] is the IPv6 localhost address.
                  hostname === '[::1]' ||
                  // 127.0.0.1/8 is considered localhost for IPv4.
                  hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));
      }
      if (window.location.protocol === 'http:' && !_isLocalhost(window.location.hostname)) {
        // Redirect to https: if we're currently using http: and we're not on localhost.
        window.location.href = 'https:' + window.location.href.substring(window.location.protocol.length);
      }

      // setup Polymer options
      window.Polymer = {lazyRegister: true, dom: 'shadow'};

      // load webcomponents polyfills
      if ('registerElement' in document
      && 'import' in document.createElement('link')
      && 'content' in document.createElement('template')) {
        // browser has web components
      } else {
        // polyfill web components
        var e = document.createElement('script');
        e.src = '/blog/bower_components/webcomponentsjs/webcomponents-lite.min.js';
        document.head.appendChild(e);
      }

      // load pre-caching service worker
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/blog/service-worker.js');
        });
      }
    })(window, document, navigator);
  </script>

  <link rel="import" href="src/my-app.html">

  <style>

    body {
      margin: 0;
      font-family: 'Roboto', 'Noto', sans-serif;
      line-height: 1.5;
      min-height: 100vh;
      background-color: #eee;
    }

  </style>

</head>
<body>

  <my-app>My App</my-app>

</body>
</html>
